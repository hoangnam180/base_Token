{
    "sourceFile": "src/middlewares/dataLocal.middleware.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1658613950950,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1658614018130,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n     const [rows] = await pool.query(sql)\r\n     if (rows.length > 0) {\r\n         res.locals.dataLocal = rows\r\n         res.cartLocals = req.signedCookies.giohang\r\n+        console.log(req.signedCookies.giohang);\r\n         next()\r\n     }\r\n }\r\n \r\n"
                },
                {
                    "date": 1658614109489,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,10 +3,12 @@\n     const sql = `SELECT * FROM dmsanpham`\r\n     const [rows] = await pool.query(sql)\r\n     if (rows.length > 0) {\r\n         res.locals.dataLocal = rows\r\n-        res.cartLocals = req.signedCookies.giohang\r\n-        console.log(req.signedCookies.giohang);\r\n+        res.cartquatity = req.signedCookies.giohang.reduce((total, item) => {\r\n+            return total + item.quantity\r\n+        }, 0)\r\n+\r\n         next()\r\n     }\r\n }\r\n \r\n"
                },
                {
                    "date": 1658614131422,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,11 +3,13 @@\n     const sql = `SELECT * FROM dmsanpham`\r\n     const [rows] = await pool.query(sql)\r\n     if (rows.length > 0) {\r\n         res.locals.dataLocal = rows\r\n-        res.cartquatity = req.signedCookies.giohang.reduce((total, item) => {\r\n+        let total = req.signedCookies.giohang.reduce((total, item) => {\r\n             return total + item.quantity\r\n-        }, 0)\r\n+        }, 0);\r\n+        console.log(total));\r\n+        res.cartquatity = total;\r\n \r\n         next()\r\n     }\r\n }\r\n"
                },
                {
                    "date": 1658614166074,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,11 +6,9 @@\n         res.locals.dataLocal = rows\r\n         let total = req.signedCookies.giohang.reduce((total, item) => {\r\n             return total + item.quantity\r\n         }, 0);\r\n-        console.log(total));\r\n-        res.cartquatity = total;\r\n-\r\n+        res.locals.cartquatity = total;\r\n         next()\r\n     }\r\n }\r\n \r\n"
                }
            ],
            "date": 1658613950950,
            "name": "Commit-0",
            "content": "import pool from '../config/connectDatabase'\r\nconst dataLocal = async (req, res, next) => {\r\n    const sql = `SELECT * FROM dmsanpham`\r\n    const [rows] = await pool.query(sql)\r\n    if (rows.length > 0) {\r\n        res.locals.dataLocal = rows\r\n        res.cartLocals = req.signedCookies.giohang\r\n        next()\r\n    }\r\n}\r\n\r\n\r\n\r\nmodule.exports = { dataLocal };"
        }
    ]
}