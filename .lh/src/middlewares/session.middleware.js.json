{
    "sourceFile": "src/middlewares/session.middleware.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 14,
            "patches": [
                {
                    "date": 1658611527400,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1658611545830,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,12 +1,7 @@\n import pool from '../config/connectDatabase'\r\n const dataLocal = async (req, res, next) => {\r\n-    const sql = `SELECT * FROM dmsanpham`\r\n-    const [rows] = await pool.query(sql)\r\n-    if (rows.length > 0) {\r\n-        res.locals.dataLocal = rows\r\n-        next()\r\n-    }\r\n+\r\n }\r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1658611612228,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,10 @@\n import pool from '../config/connectDatabase'\r\n-const dataLocal = async (req, res, next) => {\r\n+const dataLocal = (req, res, next) => {\r\n+    if (!req.session.sessionId) {\r\n \r\n+    }\r\n+    next()\r\n }\r\n \r\n \r\n \r\n"
                },
                {
                    "date": 1658611643019,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import pool from '../config/connectDatabase'\r\n const dataLocal = (req, res, next) => {\r\n     if (!req.session.sessionId) {\r\n-\r\n+        res.cookie\r\n     }\r\n     next()\r\n }\r\n \r\n"
                },
                {
                    "date": 1658611659421,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import pool from '../config/connectDatabase'\r\n const dataLocal = (req, res, next) => {\r\n     if (!req.session.sessionId) {\r\n-        res.cookie\r\n+        res.cookie('sessionId', Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15));\r\n     }\r\n     next()\r\n }\r\n \r\n"
                },
                {
                    "date": 1658611669389,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,10 @@\n import pool from '../config/connectDatabase'\r\n const dataLocal = (req, res, next) => {\r\n     if (!req.session.sessionId) {\r\n-        res.cookie('sessionId', Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15));\r\n+        res.cookie('sessionId', Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15), {\r\n+\r\n+        });\r\n     }\r\n     next()\r\n }\r\n \r\n"
                },
                {
                    "date": 1658611677079,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n import pool from '../config/connectDatabase'\r\n const dataLocal = (req, res, next) => {\r\n     if (!req.session.sessionId) {\r\n         res.cookie('sessionId', Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15), {\r\n-\r\n+            signed: true,\r\n         });\r\n     }\r\n     next()\r\n }\r\n"
                },
                {
                    "date": 1658611805398,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,6 @@\n import pool from '../config/connectDatabase'\r\n-const dataLocal = (req, res, next) => {\r\n+const Session = (req, res, next) => {\r\n     if (!req.session.sessionId) {\r\n         res.cookie('sessionId', Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15), {\r\n             signed: true,\r\n         });\r\n@@ -9,5 +9,5 @@\n }\r\n \r\n \r\n \r\n-module.exports = { dataLocal };\n\\ No newline at end of file\n+module.exports = { Session };\n\\ No newline at end of file\n"
                },
                {
                    "date": 1658611891316,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import pool from '../config/connectDatabase'\r\n const Session = (req, res, next) => {\r\n     if (!req.session.sessionId) {\r\n-        res.cookie('sessionId', Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15), {\r\n+        res.cookie('sessionId', 124234, {\r\n             signed: true,\r\n         });\r\n     }\r\n     next()\r\n"
                },
                {
                    "date": 1658612028789,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n import pool from '../config/connectDatabase'\r\n const Session = (req, res, next) => {\r\n-    if (!req.session.sessionId) {\r\n-        res.cookie('sessionId', 124234, {\r\n+    if (!req.signedCookies.sessionId) {\r\n+        res.cookie('sessionId', '124234', {\r\n             signed: true,\r\n         });\r\n     }\r\n     next()\r\n"
                },
                {
                    "date": 1658612046611,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,4 @@\n-import pool from '../config/connectDatabase'\r\n const Session = (req, res, next) => {\r\n     if (!req.signedCookies.sessionId) {\r\n         res.cookie('sessionId', '124234', {\r\n             signed: true,\r\n"
                },
                {
                    "date": 1658612106723,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,10 @@\n+const shortid = require('shortid');\r\n+\r\n+console.log(shortid.generate());\r\n const Session = (req, res, next) => {\r\n     if (!req.signedCookies.sessionId) {\r\n-        res.cookie('sessionId', '124234', {\r\n+        res.cookie('sessionId', shortid.generate(), {\r\n             signed: true,\r\n         });\r\n     }\r\n     next()\r\n"
                },
                {
                    "date": 1658612477149,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,8 @@\n-const shortid = require('shortid');\r\n-\r\n-console.log(shortid.generate());\r\n+const arrSp = []\r\n const Session = (req, res, next) => {\r\n     if (!req.signedCookies.sessionId) {\r\n-        res.cookie('sessionId', shortid.generate(), {\r\n+        res.cookie('giohang', arrSp, {\r\n             signed: true,\r\n         });\r\n     }\r\n     next()\r\n"
                },
                {
                    "date": 1658612504863,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,11 +1,12 @@\n const arrSp = []\r\n const Session = (req, res, next) => {\r\n-    if (!req.signedCookies.sessionId) {\r\n+    if (!req.signedCookies.giohang) {\r\n         res.cookie('giohang', arrSp, {\r\n             signed: true,\r\n         });\r\n     }\r\n+    console.log(req.signedCookies.giohang);\r\n     next()\r\n }\r\n \r\n \r\n"
                },
                {
                    "date": 1658612528461,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,8 @@\n         res.cookie('giohang', arrSp, {\r\n             signed: true,\r\n         });\r\n     }\r\n-    console.log(req.signedCookies.giohang);\r\n     next()\r\n }\r\n \r\n \r\n"
                }
            ],
            "date": 1658611527400,
            "name": "Commit-0",
            "content": "import pool from '../config/connectDatabase'\r\nconst dataLocal = async (req, res, next) => {\r\n    const sql = `SELECT * FROM dmsanpham`\r\n    const [rows] = await pool.query(sql)\r\n    if (rows.length > 0) {\r\n        res.locals.dataLocal = rows\r\n        next()\r\n    }\r\n}\r\n\r\n\r\n\r\nmodule.exports = { dataLocal };"
        }
    ]
}